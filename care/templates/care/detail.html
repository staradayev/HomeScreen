{% extends 'care/base.html' %}

{% block header %}

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
    	<!-- Brand and toggle get grouped for better mobile display -->
    	<div class="navbar-header">
      		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        		<span class="sr-only">Toggle navigation</span>
        		<span class="icon-bar"></span>
        		<span class="icon-bar"></span>
        		<span class="icon-bar"></span>
      		</button>
      		<a class="navbar-brand" href="#">ATO.care</a>
    	</div>

    <!-- Collect the nav links, forms, and other content for toggling -->
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	        <ul class="nav navbar-nav">
	        	<li  class="active"><a href="/care/detail"><i class="fa fa-image fa-lg"></i> My pictures</a></li>
	        	<li><a href="/care/myinfo"><i class="fa fa-user fa-lg"></i> My info</a></li>
	        	<li>
	        		<a href="/care/upload"><i class="fa fa-upload fa-lg"></i> Upload</a>
	        	</li>
	        </ul>
	      
	        <ul class="nav navbar-nav navbar-right">
	        		
	          	<li><a href="/care/myinfo">{{ user.get_username }}</a></li>
	        		
	        	<li><a href="/care/logout" class="navbar-link">Logout <i class="fa fa-sign-out fa-lg"></i> </a></li>
	      	    
	        </ul>
	    </div><!-- /.navbar-collapse -->
  	</div><!-- /.container-fluid -->
</nav>

{% endblock %}

{% block content %}

{% if picture_list and all_count > allowed_count %}
<div class="row">
    <div class="col-md-12 text-center">
    	<ul class="pager">
    		
    		{% if picture_list.has_previous %}
    			<li class="previous"><a href="?page={{ picture_list.previous_page_number }}">&larr; Older</a></li>
		    {% else %}
		    	<li class="previous disabled"><a href="#">&larr; Older</a></li>
		    {% endif %}

		    {% if picture_list.has_next %}
		    	<li class="next"><a href="?page={{ picture_list.next_page_number }}">Newer &rarr;</a></li>
		    {% else %}
		    	<li class="next disabled"><a href="#">Newer &rarr;</a></li>
		    {% endif %}
		</ul>
    </div>
</div>
{% endif %}

{% if not picture_list %}
<div class="row">
    <div class="col-md-12 text-center">
    	<h2>There are no uploaded pictures!</h2> 
    	<h4>Please upload more pictures <a href="">here</a>!</h4>
    </div>
</div>
{% endif %}

{% for img in picture_list %}
<div class="row">
	<div class="col-md-12">
		<h3>{{img.picture_name}}</h3>
	</div>
</div>
<br>
<div class="row">
    <div class="col-md-6">
    	<div class="ato-approved">
	    	<img src="{{img.image_origin.url}}" alt="{{img.picture_name}}" class="img-thumbnail">
	    	{% if img.approve_status = True %}
      			<i class="fa fa-check fa-4x"></i>
      		{% else %}
      			<i class="fa fa-close fa-4x"></i>
      		{% endif %}
    	</div>
    </div>
    <div class="col-md-6">
    	<form class="form-horizontal" role="form">
			<div class="form-group">
			    <label for="uploadLabel" class="col-md-4 control-label">Uploaded to server:</label>
			    <div class="col-md-8">
			        <p class="form-control-static"><i class="fa fa-upload "></i>&nbsp; {{img.date_pub}}</p>			        
			    </div>
			</div>
			<div class="form-group">
			    <label for="approvedLabel" class="col-md-4 control-label">Approved:</label>
			    <div class="col-md-8">
			      	<p class="form-control-static"><i class="fa fa-clock-o "></i>&nbsp; {{img.date_approve}}</p>
			    </div>
			</div>
			<div class="form-group">
			    <label for="approvedLabel" class="col-md-4 control-label">Author:</label>
			    <div class="col-md-8">
			      	<p class="form-control-static"><i class="fa fa-user "></i>&nbsp; {{img.author.first_name}} {{img.author.last_name}}</p>
			    </div>
			</div>
			<div class="form-group">
			    <label for="CategoryLabel" class="col-md-4 control-label">Categories:</label>
			    <div class="col-md-8">
			      	<ul class="list-group">
			      		{% for cat in img.category.all %}
					    	<li class="list-group-item"><i class="fa fa-list-alt "></i>&nbsp; {{cat.category_name}}</li>
					    {% endfor %}
					</ul>
			    </div>
			</div>
			<div class="form-group">
			    <label for="TagLabel" class="col-md-4 control-label">Tags:</label>
			    <div class="col-md-8">
			      	<ul class="list-group">
			      		{% for tag in img.tag.all %}
					    	<li class="list-group-item"><i class="fa fa-tags "></i>&nbsp; {{tag.tag_name}}</li>
					    {% endfor %}
					</ul>
			    </div>
			</div>
		</form>
    </div>
</div>
<hr />
{% endfor %}

{% if picture_list and all_count > allowed_count %}

<div class="row">
    <div class="col-md-12 text-center">
		<ul class="pagination">
		    {% if picture_list.has_previous %}
		    <li><a href="?page={{ picture_list.previous_page_number }}">&laquo;</a></li>
		    {% endif %}

		    {% for linkpage in picture_list.paginator.page_range %}
		      {% ifequal linkpage picture_list.number %}
		         <li  class="active"><a  href="?page={{ linkpage }}">{{ linkpage }}</a></li>
		      {% else %}
		         <li><a href="?page={{ linkpage }}">{{ linkpage }}</a></li>
		      {% endifequal %}
		   {% endfor %}
		    
		    {% if picture_list.has_next %}
		    <li><a href="?page={{ picture_list.next_page_number }}">&raquo;</a></li>
		    {% endif %}
		  
		</ul>
    </div>
</div>

{% endif %}

{% endblock %}